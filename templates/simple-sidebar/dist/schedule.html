
{% extends 'simple-sidebar/dist/base.html' %}
{% block content %}

{% for message in get_flashed_messages() %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}  

<style>
        .leftside {
        display: block;
        width: 65%;
        float: left;
      }

      .rightside {
        display: block;
        width: 30%;
        float: right;
      }

      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9999;
        display: none;
      }

      .spinner {
        position: absolute;
        top: 50%;
        left: calc(50% - 20px);
        width: 40px;
        height: 40px;
        background-color: #ffffff;

        border-radius: 100%;
        -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;
        animation: sk-scaleout 1.0s infinite ease-in-out;
      }

      @-webkit-keyframes sk-scaleout {
        0% { -webkit-transform: scale(0) }
        100% {
          -webkit-transform: scale(2.0);
          opacity: 0;
        }
      }

      @keyframes sk-scaleout {
        0% {
          -webkit-transform: scale(0);
          transform: scale(0);
        } 100% {
          -webkit-transform: scale(2.0);
          transform: scale(2.0);
          opacity: 0;
        }
      }
</style>

<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/modal.css') }}">

<br/>
<h1>Reserve A Machine</h1>
<br/>

<div id="overlay">
  <div class="spinner"></div>
</div>

<!-- 3D-Printer -->
<div class="leftside">

    <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">3D Printer</h5>
      <p class="card-text">Do you need to 3D print a model for a project? Look no further.</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="1">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>
  

  <!-- Circuit Board Creator -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Circuit Board Creator</h5>
      <p class="card-text">Feel free to use the CNC Milling machine to create your needed circuit boards.</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="2">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>

  <!-- Injection Mold -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Injection Mold</h5>
      <p class="card-text">Feel like making a mold? This machine is perfect for you.</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="3">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>

  <!-- Vinyl Cutter -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Vinyl Cutter</h5>
      <p class="card-text">This cuts vinyl... duh</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="4">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>

  <!-- Heat Press -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Heat Press</h5>
      <p class="card-text">This machine is used for mapping a print onto a shirt.</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="5">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>

  <!-- Laser Machine -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Laser Machine</h5>
      <p class="card-text">Feel like blinding your friend? This is perfect for you.</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="6">Reserve</a>
    </div>
    <div id="content"></div>
  </div>
  <br/>

  <!-- Oscilloscope -->

  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Oscilloscope</h5>
      <p class="card-text">Man idk what this does</p>
      <a href="#" class="btn btn-primary load-button" data-event-id="7">Reserve</a>
    </div>
  </div>
  <div id="content"></div>
<br/>
</div>

<div class="rightside">
  <div class="card w-100">
    <div class="card-body">
      <h5 class="card-title">Inventory of Items</h5>
      <p class="card-text">Screwdrivers x2</p>
      <p class="card-text">Gorilla Glue x8</p>
      <p class="card-text">Protective Glasses x10</p>
      <p class="card-text">Exacto Blades x4</p>
      <p class="card-text">Tape Measures x4</p>
      <p class="card-text">Clamps x5</p>
      <p class="card-text">3D Printing Wire Colors x8</p>
      <p class="card-text">Breadboard x2</p>
      <p class="card-text">Wire Kits x4</p>
      <p class="card-text">Hot Glue Gun x1</p>
      <p class="card-text">Hammers x2</p>
      <p class="card-text">Computers x4</p>
      <button type="button" class="btn btn-danger position-relative" onclick="toggleCheckboxes()">
        Report Low Inventory <span class="position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"><span class="visually-hidden">unread messages</span></span>
      </button>
        <div id="checkboxContainer" style="display: none; margin-top: 10px;">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="checkbox1">
            <label class="form-check-label" for="checkbox1">
              Gorilla Glue
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="checkbox1">
            <label class="form-check-label" for="checkbox1">
              3D Printing Colors
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="checkbox1">
            <label class="form-check-label" for="checkbox1">
              Breadboard
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="checkbox1">
            <label class="form-check-label" for="checkbox1">
              Wire Kits
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="checkbox1">
            <label class="form-check-label" for="checkbox1">
              Hot Glue Gun
            </label>
          </div>
          <button type="button" class="btn btn-success mt-2" id="submitBtn" disabled>Submit</button>
        </div>
        <div id="alertModal" class="modal">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Thank you for notifying us, we will restock shortly.</h5>
                <button type="button" class="btn-close" onclick="closeAlertModal()"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

{% block extra_js %}
<script>
  function toggleCheckboxes() {
    const checkboxContainer = document.getElementById('checkboxContainer');
    const submitBtn = document.getElementById('submitBtn');
    const isHidden = checkboxContainer.style.display === 'none';
    checkboxContainer.style.display = isHidden ? 'block' : 'none';
    submitBtn.disabled = !isHidden;
  }

  function showThankYouAlert() {
    alert("Thank you for notifying us, we will restock shortly");
  }
  document.getElementById('submitBtn').addEventListener('click', showThankYouAlert);

  function showThankYouAlert() {
    document.getElementById('alertModal').style.display = 'block';
  }

  function closeAlertModal() {
    document.getElementById('alertModal').style.display = 'none';
  }

  document.getElementById('submitBtn').addEventListener('click', showThankYouAlert);

</script>
<style>#page-content-wrapper {
  height: 1390px;
}</style>
{% endblock %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script>
$(document).ready(function() {
  $(".load-button").click(function() {
    var event_id = $(this).data("event-id"); // Set the event ID here
    
    $("#overlay").show();
    
    $.ajax({
      url: "/load_modal?event_id=" + event_id,
      type: "GET",
      success: function(response) {
        $("#content").html(response);
        $("#overlay").hide();
        $("#test").modal('show'); // Show the Bootstrap modal
      },
      error: function(xhr) {
        alert("Error loading content.");
        $("#overlay").hide();
      }
    });
  });

  $(document).on("hidden.bs.modal", ".modal", function () {
    $("#content").empty();
    location.reload();
  });
});
</script>

{% endblock %}